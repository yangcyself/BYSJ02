2020-05-23 22:45:37

debug了tau的单调问题之后，训练的CBF仍然无法保证机器人的轨迹收敛

具体观察机器人轨迹, 例如
data/learncbf/SafeWalk2_2020-05-23-02_40_12/CBF10.json

Kp=340, Kd=20
![](pics/2020-05-23-22-47-06.png)

为什么会有前面机器人先加速往前然后又减速的情况发生？
我想，既然它的状态出现了往回的行为，那势必有一些状态有类似单调的趋势，导致机器人最终摔倒。

在经过逐一观察之后，我发现是脚的角度和机器人身体有明显的单调现象

![](pics/2020-05-23-22-54-27.png)

![](pics/2020-05-23-22-54-55.png)

**但是这都是0.00几的区别啊，我怎么bound的住**

今日要改的代码:
1. 增加轨迹长度统计功能
2. 增加完整跑完的轨迹捕捉（使用exception traj）
3. 缩小torso angle限制到大于0.017
4. 缩小sampler的pk到300-400
