"""
Test the walking with Virtual constraint: using the IO linearization control scheme
"""

import sys
sys.path.append(".")
from ctrl.IOLinearCtrl import *

IOLinearCTRL.restart()
ct = IOLinearCTRL()

Balpha =  np.array([
    [-0.312200207864235,	-0.273405818482748,	-0.341803981324554,	-0.335306340263728,	-0.157409462928787, 	-0.190000400341198],
    [0.0873593498534050,	0.0968006408580198,	0.0538213218537575,	0.161494115639609,	-0.0251383465861095,	0.221710457086899],
    [-0.192984591396633,	-0.348748322531502,	-0.944889125860166,	-0.666865331720947,	-0.492844640386618, 	-0.308563786640557],
    [0.220416172331509, 	0.601272766076750,	1.97385604001431,	0.533877455251432,	0.262660870656457,  	0.0793619695538258] ])

Balpha[[0,2],:] += np.math.pi
# Balpha[:,:] *= -1 # Because the different hand direction with matlab

IOLinearCTRL.IOcmd.reg(ct,Balpha = Balpha)
def reset():
    ct.setState([
    -0.0811993844591031,
    0.795103114157230,
    -1 * 0.166893095307845,
    -1 * -0.312297866953701 + np.math.pi,
    -1 * 0.0872665060456438,
    -1 * -0.192888290448087 + np.math.pi,
    -1 * 0.220463464505203,

    0.400119346191866,
    0.0387412399536757,
    -1 * -0.0546086480499314,
    -1 * 0.497110602855553,
    -1 * 0.120915953640815,
    -1 * -1.99624253711603,
    -1 * 4.88123795888927,
    ])

reset()

if __name__ == "__main__":
    
    reset()    
    ct.step(10,sleep=0)
